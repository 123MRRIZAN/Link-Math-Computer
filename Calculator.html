<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Scientific Calculator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.min.js"></script>
  <style>
    body {
      background: linear-gradient(to right, #a78bfa, #f472b6, #f87171);
      font-family: 'Segoe UI', sans-serif;
    }
    .calculator-box {
      background: #fff;
      border-radius: 20px;
      padding: 2rem;
      width: 420px;
      margin: auto;
      box-shadow: 0 10px 20px rgba(0,0,0,0.25);
    }
    #display {
      font-size: 1.5rem;
      border: 2px solid #9333ea;
      font-family: monospace;
      padding: 10px;
    }
    #steps {
      background: #f3f4f6;
      font-size: 1rem;
      border-radius: 10px;
      padding: 1rem;
      max-height: 150px;
      overflow-y: auto;
      margin-bottom: 1rem;
    }
    #history {
      background: #fef3c7;
      border: 2px solid #facc15;
      padding: 1rem;
      border-radius: 10px;
      max-height: 150px;
      overflow-y: auto;
      margin-top: 1rem;
    }
    .btn {
      background: #7c3aed;
      color: white;
      font-weight: 600;
      font-size: 1.2rem;
      padding: 1rem;
      border-radius: 10px;
      transition: 0.3s;
    }
    .btn:hover { background: #5b21b6; transform: scale(1.05);}
    .btn-equal { background: #10b981;}
    .btn-equal:hover { background: #059669;}
  </style>
</head>
<body>
  <nav class="bg-purple-800 p-5 flex justify-between text-white shadow-lg">
    <h1 class="text-3xl font-bold">üßÆ Calculator</h1>
    <div class="space-x-6 text-xl">
      <a href="index.html" class="hover:text-yellow-300">Home</a>
      <a href="calculator.html" class="hover:text-yellow-300">Calculator</a>
      <a href="graph.html" class="hover:text-yellow-300">Graph</a>
      <a href="about.html" class="hover:text-yellow-300">About</a>
    </div>
  </nav>

  <section class="flex justify-center items-center h-screen">
    <div class="calculator-box">
      <h1 class="text-3xl font-bold text-center mb-4">Scientific Calculator</h1>
      <input id="display" type="text" class="w-full mb-3 text-right rounded-lg" placeholder="Type or click buttons...">
      <div id="steps"></div>
      <div class="grid grid-cols-4 gap-3">
        <button onclick="appendVal('(')" class="btn">(</button>
        <button onclick="appendVal(')')" class="btn">)</button>
        <button onclick="clearDisplay()" class="btn">C</button>
        <button onclick="backspace()" class="btn">‚Üê</button>

        <button onclick="appendVal('7')" class="btn">7</button>
        <button onclick="appendVal('8')" class="btn">8</button>
        <button onclick="appendVal('9')" class="btn">9</button>
        <button onclick="appendVal('/')" class="btn">√∑</button>

        <button onclick="appendVal('4')" class="btn">4</button>
        <button onclick="appendVal('5')" class="btn">5</button>
        <button onclick="appendVal('6')" class="btn">6</button>
        <button onclick="appendVal('*')" class="btn">√ó</button>

        <button onclick="appendVal('1')" class="btn">1</button>
        <button onclick="appendVal('2')" class="btn">2</button>
        <button onclick="appendVal('3')" class="btn">3</button>
        <button onclick="appendVal('-')" class="btn">‚àí</button>

        <button onclick="appendVal('0')" class="btn">0</button>
        <button onclick="appendVal('.')" class="btn">.</button>
        <button onclick="calculate()" class="btn btn-equal">=</button>
        <button onclick="appendVal('+')" class="btn">+</button>

        <button onclick="appendVal('sin(')" class="btn">sin</button>
        <button onclick="appendVal('cos(')" class="btn">cos</button>
        <button onclick="appendVal('tan(')" class="btn">tan</button>
        <button onclick="appendVal('pi')" class="btn">œÄ</button>

        <button onclick="appendVal('sqrt(')" class="btn">‚àö</button>
        <button onclick="appendVal('^2')" class="btn">x¬≤</button>
        <button onclick="appendVal('log(')" class="btn">log</button>
        <button onclick="appendVal('e')" class="btn">e</button>
      </div>
      <h2 class="text-xl font-bold mt-4">History</h2>
      <div id="history"></div>
    </div>
  </section>

  <script>
    let display = document.getElementById("display");
    let steps = document.getElementById("steps");
    let historyBox = document.getElementById("history");

    function appendVal(val) { display.value += val; }
    function clearDisplay() { display.value = ""; steps.innerHTML=""; }
    function backspace() { display.value = display.value.slice(0,-1); }

    function calculate() {
      try {
        const expr = display.value;
        let result = math.evaluate(expr);
        // Show expression and result
        steps.innerHTML = "<div><b>Expression:</b> " + expr + "</div><div><b>Result:</b> " + result + "</div>";
        display.value = result;
        historyBox.innerHTML += `<div>${expr} = ${result}</div>`;
      } catch {
        display.value = "Error";
      }
    }

    document.addEventListener("keydown", e => {
      if(e.key==="Enter") calculate();
      else if(e.key==="Backspace") backspace();
    });
  </script>
</body>
</html>
